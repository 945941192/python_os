		
        {% extends 'base/base.html' %}
        {% block title %}检测日志{% endblock %}
        {% block content %}

			<div class="am-u-md-41" style="overflow:auto;">
                <form enctype="multipart/form-data" id="forms" action="{% url 'check:upload_check_tarball' %}" method="post">  
                    <br/>
                    <br/>
                    <br/>
                    <input type="file"  id="Myfile" name="tarball" />  
                    <br/>  
                    <input class="btn btn-success" id="showLoadingDiv" onclick="submit" type="button" value="upload"/>  
                </form> 

                    <br/>
                    <br/>
                        <table id="example" class="display" cellspacing="0" width="100%">
                            <thead>                         
                            <tr>                            
                                <th> tarball info</th>                
                                <th> up status</th>               
                                <th> check status</th>              
                                <th>report 查看</th>      
                                <th>report 下载</th>      
                                <th>时间</th>                   
                            </tr>                           
                            </thead>                                                                                                                                               
                            <tbody>                         
                            {%for info in tarball_set%}     
                                <tr>                            
                                    <td style="width:20%">{{info.file_name}}</td>
                                    {% if info.up_status == 1 %}
                                        <td style="width:10%;color:lime">success</td> 
                                    {% else %}
                                        <td style="width:10%;color:red">fail</td> 
                                    {% endif %}

                                    {% if info.check_status == 1 %}
                                        <td style="width:10%;color:lime">success</td>    
                                    {% else %}
                                        <td style="width:10%;color:red">fail</td>    
                                    {% endif %}
                                    <td style="width:20%"><button class="btn btn-primary" type="button" onclick="show_check_report('{{info.file_name}}')">查看report</button></td>    
                                    <td style="width:20%"><button class="btn btn-info" type="button" onclick="down_check_report('{{info.file_name}}')">下载check报告</button></td>    
                                    <td style="width:20%">{{ info.upload_time|date:"Y-m-d H:i:s" }}</td> 
                                </tr>                           
                            {%endfor%}                      
                            </tbody>                        
                        </table>      

			</div>

        {% endblock %}

		



        {% block extrajs %}
		<script type="text/javascript">



        $(document).ready(function() {
            $("#dataLoad").hide(); //页面加载完毕后即将DIV隐藏
            $("#showLoadingDiv").click(function(){
                if (!$("#Myfile").val()){
                    alert("请选择上传文件")
                }else{
                    $("#forms").submit();

                }
                    
                });

        });

        $(document).ready(function() {
            $('#example').DataTable( {
            });
 
        });


        function show_check_report(file_name){ 
            url = "{% url 'check:show_check_report' %}"+"?tarball="+file_name;
            window.open(url);
        };

        function down_check_report(file_name){
            url = "{% url 'check:down_check_report' %}"+"?tarball="+file_name
            window.open(url) 
        }

    </script>
    {% endblock %}
